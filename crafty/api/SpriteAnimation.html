--- 
layout: default
---

<div id='doc-nav'><ul id='doc-level-one'><li><a href='events.html'>List of Events</a></li><li>Core<ul><li><a href='Crafty.html'>Crafty</a></li><li><a href='Crafty Core.html'>Crafty Core</a></li><li><a href='Crafty-extend.html'>Crafty.extend</a></li><li><a href='Crafty-init.html'>Crafty.init</a></li><li><a href='Crafty-getVersion.html'>Crafty.getVersion</a></li><li><a href='Crafty-stop.html'>Crafty.stop</a></li><li><a href='Crafty-pause.html'>Crafty.pause</a></li><li><a href='Crafty-isPaused.html'>Crafty.isPaused</a></li><li><a href='Crafty-e.html'>Crafty.e</a></li><li><a href='Crafty-c.html'>Crafty.c</a></li><li><a href='Crafty-trigger.html'>Crafty.trigger</a></li><li><a href='Crafty-bind.html'>Crafty.bind</a></li><li><a href='Crafty-uniqueBind.html'>Crafty.uniqueBind</a></li><li><a href='Crafty-one.html'>Crafty.one</a></li><li><a href='Crafty-unbind.html'>Crafty.unbind</a></li><li><a href='Crafty-frame.html'>Crafty.frame</a></li><li><a href='Crafty-settings.html'>Crafty.settings</a></li><li><a href='Crafty-clone.html'>Crafty.clone</a></li><li><a href='Crafty-support.html'>Crafty.support</a></li><li><a href='Crafty-stage.html'>Crafty.stage</a></li></ul></li><li>Game Loop<ul><li><a href='Crafty-timer.html'>Crafty.timer</a></li></ul></li><li>Events<ul><li><a href='Crafty-trigger.html'>Crafty.trigger</a></li><li><a href='Crafty-bind.html'>Crafty.bind</a></li><li><a href='Crafty-uniqueBind.html'>Crafty.uniqueBind</a></li><li><a href='Crafty-one.html'>Crafty.one</a></li><li><a href='Crafty-unbind.html'>Crafty.unbind</a></li><li><a href='Crafty-addEvent.html'>Crafty.addEvent</a></li><li><a href='Crafty-removeEvent.html'>Crafty.removeEvent</a></li></ul></li><li>2D<ul><li><a href='Crafty-HashMap.html'>Crafty.HashMap</a></li><li><a href='Crafty-map.html'>Crafty.map</a></li><li><a href='2D.html'>2D</a></li><li><a href='Gravity.html'>Gravity</a></li><li><a href='Crafty-polygon.html'>Crafty.polygon</a></li><li><a href='Crafty-circle.html'>Crafty.circle</a></li><li><a href='Collision.html'>Collision</a></li><li><a href='Crafty-isometric.html'>Crafty.isometric</a></li><li><a href='Crafty-diamondIso.html'>Crafty.diamondIso</a></li><li><a href='Crafty-math.html'>Crafty.math</a></li><li><a href='Crafty-math.Vector2D.html'>Crafty.math.Vector2D</a></li><li><a href='Crafty-math.Matrix2D.html'>Crafty.math.Matrix2D</a></li></ul></li><li>Graphics<ul><li><a href='DOM.html'>DOM</a></li><li><a href='Crafty-DOM.html'>Crafty.DOM</a></li><li><a href='HTML.html'>HTML</a></li><li><a href='Crafty-sprite.html'>Crafty.sprite</a></li><li><a href='Crafty-background.html'>Crafty.background</a></li><li><a href='Sprite.html'>Sprite</a></li><li><a href='Canvas.html'>Canvas</a></li><li><a href='Crafty-canvas.html'>Crafty.canvas</a></li><li><a href='Color.html'>Color</a></li><li><a href='Tint.html'>Tint</a></li><li><a href='Image.html'>Image</a></li><li><a href='Crafty-toRGB.html'>Crafty.toRGB</a></li><li><a href='Crafty-DrawManager.html'>Crafty.DrawManager</a></li><li><a href='Particles.html'>Particles</a></li><li><a href='Text.html'>Text</a></li></ul></li><li>Utilities<ul><li><a href='Storage.html'>Storage</a></li><li><a href='Delay.html'>Delay</a></li></ul></li><li>Misc<ul><li><a href='Crafty-support.html'>Crafty.support</a></li><li><a href='Crafty-addEvent.html'>Crafty.addEvent</a></li><li><a href='Crafty-removeEvent.html'>Crafty.removeEvent</a></li><li><a href='Crafty-device.html'>Crafty.device</a></li></ul></li><li>Stage<ul><li><a href='Crafty-background.html'>Crafty.background</a></li><li><a href='Crafty-viewport.html'>Crafty.viewport</a></li><li><a href='Crafty-scene.html'>Crafty.scene</a></li></ul></li><li>Input<ul><li><a href='Crafty-keys.html'>Crafty.keys</a></li><li><a href='Crafty-mouseButtons.html'>Crafty.mouseButtons</a></li><li><a href='Crafty-keydown.html'>Crafty.keydown</a></li><li><a href='Crafty-mouseDispatch.html'>Crafty.mouseDispatch</a></li><li><a href='Crafty-touchDispatch.html'>Crafty.touchDispatch</a></li><li><a href='KeyboardEvent.html'>KeyboardEvent</a></li><li><a href='Crafty-eventObject.html'>Crafty.eventObject</a></li><li><a href='Mouse.html'>Mouse</a></li><li><a href='Draggable.html'>Draggable</a></li><li><a href='Keyboard.html'>Keyboard</a></li><li><a href='Multiway.html'>Multiway</a></li><li><a href='Fourway.html'>Fourway</a></li><li><a href='Twoway.html'>Twoway</a></li></ul></li><li>Animation<ul><li><a href='SpriteAnimation.html'>SpriteAnimation</a></li><li><a href='Tween.html'>Tween</a></li></ul></li><li>Scenes<ul><li><a href='Crafty-scene.html'>Crafty.scene</a></li></ul></li><li>Audio<ul><li><a href='Crafty-audio.html'>Crafty.audio</a></li></ul></li><li>Assets<ul><li><a href='Crafty-assets.html'>Crafty.assets</a></li><li><a href='Crafty-asset.html'>Crafty.asset</a></li><li><a href='Crafty-image_whitelist.html'>Crafty.image_whitelist</a></li><li><a href='Crafty-loader.html'>Crafty.loader</a></li><li><a href='Crafty-modules.html'>Crafty.modules</a></li></ul></li><li>Debug<ul><li><a href='DebugCanvas.html'>DebugCanvas</a></li><li><a href='DebugRectangle.html'>DebugRectangle</a></li><li><a href='VisibleMBR.html'>VisibleMBR</a></li><li><a href='DebugPolygon.html'>DebugPolygon</a></li><li><a href='WiredHitBox.html'>WiredHitBox</a></li><li><a href='SolidHitBox.html'>SolidHitBox</a></li></ul></li></ul></div>
<div id='doc-content'><h1>SpriteAnimation</h1>
<p>Used to animate sprites by treating a sprite map as a set of animation frames.
Must be applied to an entity that has a sprite-map component.</p>
<p>To define an animation, see the <code>reel</code> method.  To play an animation, see the <code>animate</code> method.</p>
<p>A reel is an object that contains the animation frames and current state for an animation.  The reel object has the following properties:</p>
<dl>
<dt>id: (String)</dt><dd>the name of the reel</dd>
<dt>frames: (Array)</dt><dd>A list of frames in the format [xpos, ypos]</dd>
<dt>currentFrame: (Number)</dt><dd>The index of the current frame</dd>
<dt>easing: (Crafty.easing object)</dt><dd>The object that handles the internal progress of the animation.</dd>
<dt>duration: (Number)</dt><dd>The duration in milliseconds.</dd>
</dl>

<p>Many animation related events pass a reel object as data.  As typical with events, this should be treated as read only data that might be later altered by the entity.  If you wish to preserve the data, make a copy of it.</p>
<h4>Events</h4>
<dl><dt><span class='event-name'>StartAnimation</span> [<span class='event-property-name'>Data</span>: <span class='event-property'>{Reel}</span>]</dt><dd>When an animation starts playing, or is resumed from the paused state</dd>
<dt><span class='event-name'>AnimationEnd</span> [<span class='event-property-name'>Data</span>: <span class='event-property'>{ Reel }</span>]</dt><dd>When the animation finishes</dd>
<dt><span class='event-name'>FrameChange</span> [<span class='event-property-name'>Data</span>: <span class='event-property'>{ Reel }</span>]</dt><dd>Each time the frame of the current reel changes</dd>
<dt><span class='event-name'>ReelChange</span> [<span class='event-property-name'>Data</span>: <span class='event-property'>{ Reel }</span>]</dt><dd>When the reel changes</dd>
</dl>
<h4>See Also</h4>
<ul><li><a href=crafty-sprite.html>crafty.sprite</a></li></ul><div class='doc-contents'><h4>Properties and Methods</h4><ul><li><a href='#-reel'>.reel</a></li><li><a href='#-animate'>.animate</a></li><li><a href='#-resumeAnimation'>.resumeAnimation</a></li><li><a href='#-pauseAnimation'>.pauseAnimation</a></li><li><a href='#-resetAnimation'>.resetAnimation</a></li><li><a href='#-loops'>.loops</a></li><li><a href='#-reelPosition'>.reelPosition</a></li><li><a href='#-isPlaying'>.isPlaying</a></li><li><a href='#-getReel'>.getReel</a></li></ul></div>

<div id='-reel' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.reel</h2>
<p>Used to define reels, to change the active reel, and to fetch the id of the active reel.</p>
<p><code>public this .reel(String reelId, Duration duration, Number fromX, Number fromY, Number frameCount)</code> </p>
<p>Defines a reel by starting and ending position on the sprite sheet.</p>
<dl>
<dt>reelId</dt><dd>ID of the animation reel being created</dd>
<dt>duration</dt><dd>The length of the animation in milliseconds.</dd>
<dt>fromX</dt><dd>Starting <code>x</code> position on the sprite map (x&#39;s unit is the horizontal size of the sprite in the sprite map).</dd>
<dt>fromY</dt><dd><code>y</code> position on the sprite map (y&#39;s unit is the horizontal size of the sprite in the sprite map). Remains constant through the animation.</dd>
<dt>frameCount</dt><dd>The number of sequential frames in the animation.  If negative, the animation will play backwards.</dd>
</dl>

<p><code>public this .reel(String reelId, Duration duration, Array frames)</code> </p>
<p>Defines a reel by an explicit list of frames</p>
<dl>
<dt>reelId</dt><dd>ID of the animation reel being created</dd>
<dt>duration</dt><dd>The length of the animation in milliseconds.</dd>
<dt>frames</dt><dd>An array of arrays containing the <code>x</code> and <code>y</code> values of successive frames: [[x1,y1],[x2,y2],...] (the values are in the unit of the sprite map&#39;s width/height respectively).</dd>
</dl>

<p><code>public this .reel(String reelId)</code> </p>
<p>Switches to the specified reel.  The sprite will be updated to that reel&#39;s current frame</p>
<dl>
<dt>reelID</dt><dd>the ID to switch to</dd>
</dl>

<p><code>public Reel .reel()</code> </p>
<dl>
<dt class='return'>[returns]</dt><dd>The id of the current reel</dd>
</dl>


<p>A method to handle animation reels.  Only works for sprites built with the Crafty.sprite methods.
See the Tween component for animation of 2D properties.</p>
<p>To setup an animation reel, pass the name of the reel (used to identify the reel later), and either an
array of absolute sprite positions or the start x on the sprite map, the y on the sprite map and then the end x on the sprite map.</p>
<h4> Example </h4>

<pre><code>// Define a sprite-map component
Crafty.sprite(16, &quot;images/sprite.png&quot;, {
    PlayerSprite: [0,0]
});

// Define an animation on the second row of the sprite map (y = 1)
// from the left most sprite (fromX = 0) to the fourth sprite
// on that row (toX = 3), with a duration of 1 second
Crafty.e(&quot;2D, DOM, SpriteAnimation, PlayerSprite&quot;).reel(&#39;PlayerRunning&#39;, 1000, 0, 1, 3);

// This is the same animation definition, but using the alternative method
Crafty.e(&quot;2D, DOM, SpriteAnimation, PlayerSprite&quot;).reel(&#39;PlayerRunning&#39;, 1000, [[0, 1], [1, 1], [2, 1], [3, 1]]);</code></pre>


<p></div></p>
<div id='-animate' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.animate</h2>
<p><code>public this .animate([String reelId] [, Number loopCount])</code> </p>
<dl>
<dt>reelId</dt><dd>ID of the animation reel to play.  Defaults to the current reel if none is specified.</dd>
<dt>loopCount</dt><dd>Number of times to repeat the animation. Use -1 to repeat indefinitely.  Defaults to 1.</dd>
</dl>

<p>Play one of the reels previously defined through <code>.reel(...)</code>. Simply pass the name of the reel. If you wish the
animation to play multiple times in succession, pass in the amount of times as an additional parameter.
To have the animation repeat indefinitely, pass in <code>-1</code>.</p>
<p>If another animation is currently playing, it will be paused.</p>
<p>This will always play an animation from the beginning.  If you wish to resume from the current state of a reel, use <code>resumeAnimation()</code>.</p>
<p>Once an animation ends, it will remain at its last frame.</p>
<h4> Example </h4>

<pre><code>// Define a sprite-map component
Crafty.sprite(16, &quot;images/sprite.png&quot;, {
    PlayerSprite: [0,0]
});

// Play the animation across 20 frames (so each sprite in the 4 sprite animation should be seen for 5 frames) and repeat indefinitely
Crafty.e(&quot;2D, DOM, SpriteAnimation, PlayerSprite&quot;)
    .reel(&#39;PlayerRunning&#39;, 20, 0, 0, 3) // setup animation
    .animate(&#39;PlayerRunning&#39;, -1); // start animation</code></pre>


</div>



<div id='-resumeAnimation' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.resumeAnimation</h2>
<p><code>public this .resumeAnimation()</code> </p>
<p>This will resume animation of the current reel from its current state.
If a reel is already playing, or there is no current reel, there will be no effect.</p>


</div>



<div id='-pauseAnimation' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.pauseAnimation</h2>
<p><code>public this .pauseAnimation(void)</code> </p>
<p>Pauses the currently playing animation, or does nothing if no animation is playing.</p>


</div>



<div id='-resetAnimation' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.resetAnimation</h2>
<p><code>public this .resetAnimation()</code> </p>
<p>Resets the current animation to its initial state.  Resets the number of loops to the last specified value, which defaults to 1.</p>
<p>Neither pauses nor resumes the current animation.</p>


</div>



<div id='-loops' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.loops</h2>
<p><code>public this .loops(Number loopCount)</code> </p>
<dl>
<dt>loopCount</dt><dd>The number of times to play the animation</dd>
</dl>

<p>Sets the number of times the animation will loop for.
If called while an animation is in progress, the current state will be considered the first loop.</p>
<p><code>public Number .loops()</code> </p>
<dl>
<dt class='return'>[returns]</dt><dd>The number of loops left.  Returns 0 if no reel is active.</dd>
</dl>


</div>



<div id='-reelPosition' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.reelPosition</h2>
<p><code>public this .reelPosition(Integer position)</code> </p>
<p>Sets the position of the current reel by frame number.</p>
<dl>
<dt>position</dt><dd>the frame to jump to.  This is zero-indexed.  A negative values counts back from the last frame.</dd>
</dl>

<p><code>public this .reelPosition(Number position)</code> </p>
<p>Sets the position of the current reel by percent progress.</p>
<dl>
<dt>position</dt><dd>a non-integer number between 0 and 1</dd>
</dl>

<p><code>public this .reelPosition(String position)</code> </p>
<p>Jumps to the specified position.  The only currently accepted value is &quot;end&quot;, which will jump to the end of the reel.</p>
<p><code>public Number .reelPosition()</code> </p>
<dl>
<dt class='return'>[returns]</dt><dd>The current frame number</dd>
</dl>



</div>



<div id='-isPlaying' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.isPlaying</h2>
<p><code>public Boolean .isPlaying([String reelId])</code> </p>
<dl>
<dt>reelId</dt><dd>The reelId of the reel we wish to examine</dd>
<dt class='return'>[returns]</dt><dd>The current animation state</dd>
</dl>

<p>Determines if the specified animation is currently playing. If no reelId is specified,
checks if any animation is playing.</p>
<h4> Example </h4>

<pre><code>myEntity.isPlaying() // is any animation playing
myEntity.isPlaying(&#39;PlayerRunning&#39;) // is the PlayerRunning animation playing</code></pre>


</div>



<div id='-getReel' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.getReel</h2>
<p><code>public Reel .getReel()</code> </p>
<dl>
<dt class='return'>[returns]</dt><dd>The current reel, or null if there is no active reel</dd>
</dl>

<p><code>public Reel .getReel(reelId)</code> </p>
<dl>
<dt>reelId</dt><dd>The id of the reel to fetch.</dd>
<dt class='return'>[returns]</dt><dd>The specified reel, or <code>undefined</code> if no such reel exists.</dd>
</dl>



</div>

</div>