<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Crafty - </title>
	<link type="text/css" rel="stylesheet" href="/craftyjs-site.css" />

	<link href='http://fonts.googleapis.com/css?family=Arvo:regular,bold' rel='stylesheet' 	type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' rel='stylesheet' type='text/css'>
	<link rel="shortcut icon" href="/favicon.ico">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script>
	<link rel="stylesheet" href="/github.css"/>
	<script type="text/javascript">

		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-23935213-2']);
		_gaq.push(['_trackPageview']);

		(function () {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

	</script>
</head>
<body>
	<div id = "header-background"> </div>
	<div id = "page-frame">
	<div id="header">
		<nav class="navbar">
  			<div class="container-fluid">
  				<div class="navbar-header">
  					<a class="navbar-brand" href="/"> <img class="logo" src="/images/text-logo.png" /> </a>
  					
				</div>
				<div class="collapse navbar-collapse navbar-right" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li><a href="/">Home</a></li>
						<li><a href="/getting-started/">Getting started</a></li>
						<li><a href="/documentation/">Documentation</a></li>
						<li><a href="/api/">API</a></li>
						<li><a href="https://groups.google.com/forum/#!forum/craftyjs">Forum</a></li>
						<li><a href="/components/">Components</a></li>
						<li class="emph"><a href="/#install">Download</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</div>


	<div id="main">
		<div id="content" class="container">
			

<div id='api-container'>
	

<div id='doc-nav'><ul id='doc-level-one'><li><a href='events.html'>List of Events</a></li><li>2D<ul><li><a href='Crafty-map.html'>Crafty.map</a></li><li><a href='2D.html'>2D</a></li><li><a href='Gravity.html'>Gravity</a></li><li><a href='Crafty-polygon.html'>Crafty.polygon</a></li><li><a href='Crafty-circle.html'>Crafty.circle</a></li><li><a href='Crafty-HashMap.html'>Crafty.HashMap</a></li><li><a href='Collision.html'>Collision</a></li><li><a href='Crafty-diamondIso.html'>Crafty.diamondIso</a></li><li><a href='Crafty-isometric.html'>Crafty.isometric</a></li><li><a href='Crafty-math.html'>Crafty.math</a></li><li><a href='Crafty-math.Vector2D.html'>Crafty.math.Vector2D</a></li><li><a href='Crafty-math.Matrix2D.html'>Crafty.math.Matrix2D</a></li></ul></li><li>Graphics<ul><li><a href='DOM.html'>DOM</a></li><li><a href='Crafty-DOM.html'>Crafty.DOM</a></li><li><a href='Canvas.html'>Canvas</a></li><li><a href='Crafty-canvas.html'>Crafty.canvas</a></li><li><a href='Crafty-assignColor.html'>Crafty.assignColor</a></li><li><a href='Color.html'>Color</a></li><li><a href='Image.html'>Image</a></li><li><a href='Crafty-DrawManager.html'>Crafty.DrawManager</a></li><li><a href='Crafty-pixelart.html'>Crafty.pixelart</a></li><li><a href='Crafty-background.html'>Crafty.background</a></li><li><a href='HTML.html'>HTML</a></li><li><a href='Particles.html'>Particles</a></li><li><a href='Crafty-sprite.html'>Crafty.sprite</a></li><li><a href='Sprite.html'>Sprite</a></li><li><a href='Text.html'>Text</a></li></ul></li><li>Debug<ul><li><a href='DebugCanvas.html'>DebugCanvas</a></li><li><a href='DebugRectangle.html'>DebugRectangle</a></li><li><a href='VisibleMBR.html'>VisibleMBR</a></li><li><a href='DebugPolygon.html'>DebugPolygon</a></li><li><a href='WiredHitBox.html'>WiredHitBox</a></li><li><a href='SolidHitBox.html'>SolidHitBox</a></li></ul></li><li>Animation<ul><li><a href='Tween.html'>Tween</a></li><li><a href='SpriteAnimation.html'>SpriteAnimation</a></li></ul></li><li>Input<ul><li><a href='Crafty-keydown.html'>Crafty.keydown</a></li><li><a href='Crafty-mouseDispatch.html'>Crafty.mouseDispatch</a></li><li><a href='Crafty-touchDispatch.html'>Crafty.touchDispatch</a></li><li><a href='KeyboardEvent.html'>KeyboardEvent</a></li><li><a href='Crafty-eventObject.html'>Crafty.eventObject</a></li><li><a href='Mouse.html'>Mouse</a></li><li><a href='Draggable.html'>Draggable</a></li><li><a href='Keyboard.html'>Keyboard</a></li><li><a href='Multiway.html'>Multiway</a></li><li><a href='Fourway.html'>Fourway</a></li><li><a href='Twoway.html'>Twoway</a></li><li><a href='Crafty-keys.html'>Crafty.keys</a></li><li><a href='Crafty-mouseButtons.html'>Crafty.mouseButtons</a></li></ul></li><li>Core<ul><li><a href='Crafty.html'>Crafty</a></li><li><a href='Crafty Core.html'>Crafty Core</a></li><li><a href='Crafty-extend.html'>Crafty.extend</a></li><li><a href='Crafty-init.html'>Crafty.init</a></li><li><a href='Crafty-getVersion.html'>Crafty.getVersion</a></li><li><a href='Crafty-stop.html'>Crafty.stop</a></li><li><a href='Crafty-pause.html'>Crafty.pause</a></li><li><a href='Crafty-isPaused.html'>Crafty.isPaused</a></li><li><a href='Crafty-e.html'>Crafty.e</a></li><li><a href='Crafty-c.html'>Crafty.c</a></li><li><a href='Crafty-trigger.html'>Crafty.trigger</a></li><li><a href='Crafty-bind.html'>Crafty.bind</a></li><li><a href='Crafty-uniqueBind.html'>Crafty.uniqueBind</a></li><li><a href='Crafty-one.html'>Crafty.one</a></li><li><a href='Crafty-unbind.html'>Crafty.unbind</a></li><li><a href='Crafty-frame.html'>Crafty.frame</a></li><li><a href='Crafty-settings.html'>Crafty.settings</a></li><li><a href='Crafty-clone.html'>Crafty.clone</a></li><li><a href='Crafty-support.html'>Crafty.support</a></li><li><a href='Crafty-stage.html'>Crafty.stage</a></li></ul></li><li>Game Loop<ul><li><a href='Crafty-timer.html'>Crafty.timer</a></li></ul></li><li>Events<ul><li><a href='Crafty-trigger.html'>Crafty.trigger</a></li><li><a href='Crafty-bind.html'>Crafty.bind</a></li><li><a href='Crafty-uniqueBind.html'>Crafty.uniqueBind</a></li><li><a href='Crafty-one.html'>Crafty.one</a></li><li><a href='Crafty-unbind.html'>Crafty.unbind</a></li><li><a href='Crafty-addEvent.html'>Crafty.addEvent</a></li><li><a href='Crafty-removeEvent.html'>Crafty.removeEvent</a></li></ul></li><li>Misc<ul><li><a href='Crafty-device.html'>Crafty.device</a></li><li><a href='Crafty-support.html'>Crafty.support</a></li><li><a href='Crafty-addEvent.html'>Crafty.addEvent</a></li><li><a href='Crafty-removeEvent.html'>Crafty.removeEvent</a></li></ul></li><li>Stage<ul><li><a href='Crafty-background.html'>Crafty.background</a></li><li><a href='Crafty-scene.html'>Crafty.scene</a></li><li><a href='Crafty-viewport.html'>Crafty.viewport</a></li></ul></li><li>Assets<ul><li><a href='Crafty-assets.html'>Crafty.assets</a></li><li><a href='Crafty-paths.html'>Crafty.paths</a></li><li><a href='Crafty-asset.html'>Crafty.asset</a></li><li><a href='Crafty-image_whitelist.html'>Crafty.image_whitelist</a></li><li><a href='Crafty-loader.html'>Crafty.loader</a></li><li><a href='Crafty-removeAssets.html'>Crafty.removeAssets</a></li></ul></li><li>Model<ul><li><a href='Model.html'>Model</a></li></ul></li><li>Scenes<ul><li><a href='Crafty-scene.html'>Crafty.scene</a></li></ul></li><li>Audio<ul><li><a href='Crafty-audio.html'>Crafty.audio</a></li></ul></li><li>Utilities<ul><li><a href='Storage.html'>Storage</a></li><li><a href='Delay.html'>Delay</a></li></ul></li></ul></div>
<div id='doc-content'><h1 id="collision">Collision</h1>
<p>Component to detect collision between any two convex polygons.</p>
<p>If collision checks are registered for multiple component and collisions with
multiple types occur simultaniously, each collision will cause an individual
event to fire.</p>
<p><strong>Note:</strong> All data received from events is only valid for the duration of the event&#39;s callback.
If you wish to preserve the data, make a copy of it.</p>
<p>For a description of collision event data (hitData above), see the documentation for
<code>.hit()</code>.</p>

<h4>Events</h4>
<dl><dt><span class='event-name'>HitOn</span> [<span class='event-property-name'>Data</span>: <span class='event-property'>{ hitData }</span>]</dt><dd>Triggered when collisions occur. Will not trigger again until collisions of this type cease, or an event is requested once more (using <code>resetHitChecks(component)</code>).</dd>
<dt><span class='event-name'>HitOff</span> [<span class='event-property-name'>Data</span>: <span class='event-property'>{ componentName }</span>]</dt><dd>Triggered when collision with a specific component type ceases</dd>
</dl>
<h4>See Also</h4>
<ul><li><a href=#-hit>.hit</a></li><li><a href=#-checkHits>.checkHits</a></li><li><a href=#-onHit>.onHit</a></li></ul><div class='doc-contents'><h4>Properties and Methods</h4><ul><li><a href='#-init'>.init</a></li><li><a href='#-collision'>.collision</a></li><li><a href='#-hit'>.hit</a></li><li><a href='#-onHit'>.onHit</a></li><li><a href='#-_createCollisionHandler'>._createCollisionHandler</a></li><li><a href='#-checkHits'>.checkHits</a></li><li><a href='#-ignoreHits'>.ignoreHits</a></li><li><a href='#-resetHitChecks'>.resetHitChecks</a></li></ul></div>

<div id='-init' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.init</h2>
<p>Set up collision handling.</p>
<p>By default, the collision hitbox will match the dimensions (x, y, w, h) and rotation of the object.</p>
<p><strong>Note:</strong> If the entity this component is applied to does not have its
dimensions set the default hit area will not be set properly.</p>


</div>



<div id='-collision' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.collision</h2>
<p><p><code>public this .collision([Crafty.polygon polygon])</code> </p></p>
<dl>
<dt>polygon</dt><dd>Crafty.polygon object that will act as the hit area.</dd>
</dl>

<p><p><code>public this .collision(Array point1, .., Array pointN)</code> </p></p>
<dl>
<dt>point#</dt><dd>Array of [x, y] coordinate pairs to generate a hit area polygon.</dd>
</dl>

<p><p>Constructor that takes a polygon or array of points to use as the hit area,
with points being relative to the object&#39;s position in its unrotated state.</p></p>
<p><p>The hit area must be a convex shape and not concave for collision detection to work properly.</p></p>
<p><p>If no parameter is passed, the x, y, w, h properties of the entity will be used, and the hitbox will be resized when the entity is.</p></p>
<p><p>If a hitbox is set that is outside of the bounds of the entity itself, there will be a small performance penalty as it is tracked separately.</p></p>
<h4> Example </h4>

<p><pre><code>Crafty.e(&quot;2D, Collision&quot;).collision(
    new Crafty.polygon([50,0], [100,100], [0,100])
);</p>
<p>Crafty.e(&quot;2D, Collision&quot;).collision([50,0], [100,100], [0,100]);
</code></pre></p>
<p><h4>Events</h4></p>
<p><dl><dt><span class='event-name'>NewHitbox</span> [<span class='event-property-name'>Data</span>: <span class='event-property'>Crafty.polygon</span>]</dt><dd>when a new hitbox is assigned</dd>
</dl></p>
<p><h4>See Also</h4></p>
<ul><li><a href=Crafty-polygon.html>Crafty.polygon</a></li></ul>

</div>



<div id='-hit' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.hit</h2>
<p><p><code>public Boolean/Array hit(String component)</code> </p></p>
<p><p><dl></p></p>
<p><p><dt>component</dt><dd>Check collision with entities that have this component</dd>
</dl>
applied to them.</p></p>
<p><p><dl></p></p>
<p><p><dt class='return'>[returns]</dt><dd><code>false</code> if there is no collision. If a collision is detected,</dd>
</dl>
returns an Array of collision data objects (see below).</p></p>
<p><p>Tests for collisions with entities that have the specified component
applied to them.
If a collision is detected, data regarding the collision will be present in
the array returned by this method.
If no collisions occur, this method returns false.</p></p>
<p><p>Following is a description of a collision data object that this method may
return: The returned collision data will be an Array of Objects with the
type of collision used, the object collided and if the type used was SAT (a polygon was used as the hitbox) then an amount of overlap.</p></p>
<p><pre><code>[{
   obj: [entity],
   type: [&quot;MBR&quot; or &quot;SAT&quot;],
   overlap: [number]
}]
</code></pre><p><strong>obj:</strong> The entity with which the collision occured.
<strong>type:</strong> Collision detection method used. One of:</p></p>
<ul>
<li><em>MBR:</em> Standard axis aligned rectangle intersection (<code>.intersect</code> in the 2D component).</li>
<li><em>SAT:</em> Collision between any two convex polygons. Used when both colliding entities have the <code>Collision</code> component applied to them.
<strong>overlap:</strong> If SAT collision was used, this will signify the overlap percentage between the colliding entities.</li>
</ul>

<p><h4>See Also</h4></p>
<ul><li><a href=2D.html>2D</a></li></ul>

</div>



<div id='-onHit' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.onHit</h2>
<p><code>public this .onHit(String component, Function hit[, Function noHit])</code> </p>
<dl>
<dt>component</dt><dd>Component to check collisions for.</dd>
<dt>hit</dt><dd>Callback method to execute upon collision with component. Will be passed the results of the collision check in the same format documented for hit().</dd>
<dt>noHit</dt><dd>Callback method executed once as soon as collision stops.</dd>
</dl>

<p>Creates an EnterFrame event calling .hit() each frame.  When a collision is detected the callback will be invoked.
Note that the <code>hit</code> callback will be invoked every frame the collision is active, not just the first time the collision occurs.
If you want more fine-grained control consider using <code>.checkHits</code> or <code>.hit</code>.</p>

<p><h4>See Also</h4></p>
<ul><li><a href=#-checkHits>.checkHits</a></li><li><a href=#-hit>.hit</a></li></ul>

</div>



<div id='-_createCollisionHandler' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>._createCollisionHandler</h2>
<p><code>public void .checkHits(String component, Object collisionData)</code> </p>
<p><dl></p>
<p><dt>component</dt><dd>The name of the component for which this handler</dd>
</dl>
checks for collisions.</p>
<p><dl></p>
<p><dt>collisionData</dt><dd>Collision data object used to track collisions with</dd>
</dl>
the specified component.</p>
<p>This is a helper method for creating collisions handlers set up by
<code>.checkHits(...)</code>. Do not call this directly.</p>

<p><p><h4>See Also</h4></p></p>
<ul><li><a href=#-checkHits>.checkHits</a></li></ul>

<p></div></p>
<div id='-checkHits' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.checkHits</h2>
<p><p><code>public this .checkHits(String componentList)</code> </p></p>
<dl>
<dt>componentList</dt><dd>A comma seperated list of components to check for collisions with.</dd>
</dl>
<code>public this .checkHits(String component1[, .., String componentN])</code> 

<dl>
<dt>component#</dt><dd>A component to check for collisions with.</dd>
</dl>

<p><p>Performs collision checks against all entities that have at least one of
the components specified when calling this method. If collisions occur,
a &quot;HitOn&quot; event containing the collision information will be fired for the
entity on which this method was invoked. See the documentation for <code>.hit()</code>
for a description of collision data contained in the event.
When a collision that was reported ends, a corresponding &quot;HitOff&quot; event
will be fired.</p></p>
<p><p>Calling this method more than once for the same component type will not
cause redundant hit checks.</p></p>
<p><p><strong>Note:</strong> Hit checks are performed upon entering each new frame (using
the <em>EnterFrame</em> event). It is entirely possible for object to move in
said frame after the checks were performed (even if the more is the
result of <em>EnterFrame</em>, as handlers run in no particular order). In such
a case, the hit events will not fire until the next check is performed in
the following frame.</p></p>
<h4> Example </h4>

<p><pre><code>Crafty.e(&quot;2D, Collision&quot;)
    .checkHits(&#39;Solid&#39;) // check for collisions with entities that have the Solid component in each frame
    .bind(&quot;HitOn&quot;, function(hitData) {
        console.log(&quot;Collision with Solid entity occurred for the first time.&quot;);
    })
    .bind(&quot;HitOff&quot;, function(comp) {
        console.log(&quot;Collision with Solid entity ended.&quot;);
    });
</code></pre></p>
<p><h4>See Also</h4></p>
<ul><li><a href=#-hit>.hit</a></li></ul>

</div>



<div id='-ignoreHits' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.ignoreHits</h2>
<p><p><code>public this .ignoreHits()</code> </p></p>
<p><p><code>public this .ignoreHits(String componentList)</code> </p></p>
<dl>
<dt>componentList</dt><dd>A comma seperated list of components to stop checking</dd>
</dl>
for collisions with.
<code>public this .ignoreHits(String component1[, .., String componentN])</code> 

<dl>
<dt>component#</dt><dd>A component to stop checking for collisions with.</dd>
</dl>

<p><p>Stops checking for collisions with all, or certain, components. If called
without arguments, this method will cause all collision checks on the
entity to cease. To disable checks for collisions with specific
components, specify the components as a comma separated string or as
a set of arguments.</p></p>
<p><p>Calling this method with component names for which there are no collision
checks has no effect.</p></p>
<h4> Example </h4>

<pre><code>Crafty.e(&quot;2D, Collision&quot;)
    .checkHits(&#39;Solid&#39;)
    ...
    .ignoreHits(&#39;Solid&#39;); // stop checking for collisions with entities that have the Solid component
</code></pre>

</div>



<div id='-resetHitChecks' class='docblock'>

<a href='#doc-nav' class='doc-top'>Back to top</a><h2>.resetHitChecks</h2>
<p><p><code>public this .resetHitChecks()</code> </p></p>
<p><p><code>public this .resetHitChecks(String componentList)</code> </p></p>
<dl>
<dt>componentList</dt><dd>A comma seperated list of components to re-check</dd>
</dl>
for collisions with.
<code>public this .resetHitChecks(String component1[, .., String componentN])</code> 

<dl>
<dt>component#</dt><dd>A component to re-check for collisions with.</dd>
</dl>

<p><p>Causes collision events to be received for collisions that are already
taking place (normally, an additional event would not fire before said
collisions cease and happen another time).
If called without arguments, this method will cause all collision checks on the
entity to fire events once more. To re-check for collisions with specific
components, specify the components as a comma separated string or as
a set of arguments.</p></p>
<p><p>Calling this method with component names for which there are no collision
checks has no effect.</p></p>
<h4> Example </h4>

<pre><code>// this example fires the HitOn event each frame the collision with the Solid entity is active, instead of just the first time the collision occurs.
Crafty.e(&quot;2D, Collision&quot;)
    .checkHits(&#39;Solid&#39;)
    .bind(&quot;HitOn&quot;, function(hitData) {
        console.log(&quot;Collision with Solid entity was reported in this frame again!&quot;);
        this.resetHitChecks(&#39;Solid&#39;); // fire the HitOn event in the next frame also, if the collision is still active.
    })
</code></pre>

</div>

</div>
</div>
			
		</div>
	</div>
	<div class="clearer"></div>
	<div id="footer">
		<div id="contact">
			<a href="https://groups.google.com/forum/#!forum/craftyjs">
				<img src="/images/google.png" />
				google groups</a>
			<a href="mailto:starwed@gmail.com">
				<img src="/images/email.png" />
				starwed@gmail.com</a>
			<a href="https://github.com/craftyjs/Crafty">
				<img src="/images/github.png" />
				github</a>
		</div>
		<ul>
			<li><a href="/">Home</a></li>
				<li><a href="/getting-started/">Getting started</a></li>
				<li><a href="/documentation/">Documentation</a></li>
				<li><a href="/api/">API</a></li>
				<li><a href="https://groups.google.com/forum/#!forum/craftyjs">Forum</a></li>
				<li><a href="/modules/">Modules</a></li>
				<li class="emph"><a href="/download/">Download</a></li>
		</ul>
		<p>
			&copy; Crafty 2010-2015. Crafty is distributed under the <a href="http://en.wikipedia.org/wiki/MIT_License">MIT</a> or <a href="http://en.wikipedia.org/wiki/GNU_General_Public_License">GPL</a>
			license.
		</p>
	</div>
</div>
</body>
</html>
